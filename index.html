<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Для экзамена</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="content">
<div class="vord">
    <h1>Загрузка из регистра сведений</h1>
    <p>
        &НаКлиенте
Процедура ВидКурсаПриИзменении(Элемент)
	   Ценфыва = 0;
	Ценфыва = ПолучитьЦену(Объект.ВидКурса, Объект.Курс);
	Объект.ЦенаКурса = Ценфыва;
КонецПроцедуры

&НаСервере
Функция ПолучитьЦену(ТекВидКурса, ТекКурс)
	Запрос = Новый Запрос;
	Запрос.Текст = 
	"ВЫБРАТЬ
      |    ЦенаКурсов.Цена       
      |ИЗ
      |    РегистрСведений.ЦенаКурсов КАК ЦенаКурсов
      |ГДЕ
      |    ЦенаКурсов.Курс = &Курс И
      |    ЦенаКурсов.ВидКурса = &ВидКурса";
	
	Запрос.УстановитьПараметр("Курс", ТекКурс);
	Запрос.УстановитьПараметр("ВидКурса", ТекВидКурса);
	Записи = Запрос.Выполнить().Выбрать();
	 Если Записи.Следующий() Тогда
     Возврат  Записи.Цена;     
Иначе
    Возврат 0;
КонецЕсли;
	
КонецФункции;

    </p>
</div>
<div class="listview">
<h1>Заполнение строки табл части</h1>
<p>
    &НаКлиенте
Процедура ПоставкаЦенаПриИзменении(Элемент)
	ДанныеСтрочки = Элементы.Поставка.ТекущиеДанные;	
	ДанныеСтрочки.ЦенаСУчетомНДС = ДанныеСтрочки.Цена + (ДанныеСтрочки.Цена * 0.2);
КонецПроцедуры

</p>
    
<h1>Рассчет суммы</h1>
<p>
    
&НаКлиенте
Процедура ПродажаПриИзменении(Элемент)
	ИтоговаяСтоимость = 0;
	Для каждого стр из Объект.Продажа цикл
		    ИтоговаяСтоимость = ИтоговаяСтоимость + стр.Сумма;
		КонецЦикла;
		Объект.ИтоговаяСуммаПродажи = ИтоговаяСтоимость;
		
		Скидка = ИтоговаяСтоимость * 0.05;
		Объект.Скидка = Скидка;
КонецПроцедуры

</p>
    
</div>
</body>
</html>
